# Core Configuration
WEBHOOK_URL=https://your-webhook-url.com
# WEBHOOK_RULES={"rules":[{"name":"support","conditions":{"to":"support@*"},"webhook":"https://support.webhook.com","priority":1}]}
PORT=25
SMTP_SECURE=false
WEBHOOK_CONCURRENCY=5
WEBHOOK_TIMEOUT=5000
WEBHOOK_RETRY_DELAY_MS=60000
SMTP_MAX_CLIENTS=200
SMTP_SOCKET_TIMEOUT=60000
SMTP_CLOSE_TIMEOUT=30000
SMTP_MAX_MESSAGE_SIZE=10485760
SMTP_RATE_LIMIT_WINDOW_MS=60000
SMTP_RATE_LIMIT_MAX_CONNECTIONS=120
MAX_QUEUE_SIZE=1000
REQUIRE_TRUSTED_RELAY=false
# TRUSTED_RELAY_IPS=127.0.0.1,10.0.0.5
# ALLOWED_SMTP_CLIENTS=127.0.0.1
# ALLOWED_SENDER_DOMAINS=example.com,partner.com
# REQUIRED_AUTH_RESULTS=spf=pass,dkim=pass,dmarc=pass

# Recipient Domain Filtering (comma-separated list of domains to accept emails for)
# Leave empty or unset to accept emails for all domains
# Example: ALLOWED_RECIPIENT_DOMAINS=inbox.example.com,mail.example.com
# ALLOWED_RECIPIENT_DOMAINS=

# Attachment Storage (S3 is optional - if not configured, local storage is used)
MAX_FILE_SIZE=5242880
# AWS_REGION=your-aws-region
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# S3_BUCKET_NAME=your-s3-bucket-name
# S3_ENDPOINT=http://localhost:9000
# S3_FORCE_PATH_STYLE=true

# Local Storage & Error Recovery
LOCAL_STORAGE_PATH=./temp-attachments
LOCAL_STORAGE_RETENTION=24
# LOCAL_STORAGE_ENCRYPTION_KEY=<32-byte key in hex or base64>
EXPOSE_LOCAL_ATTACHMENT_PATHS=false
S3_RETRY_INTERVAL=5
S3_MAX_RETRIES=100
DURABLE_QUEUE_PATH=./queue-data

# Logging
LOG_LEVEL=info

# Webhook security
# WEBHOOK_SECRET=replace-with-random-secret
ALLOW_INSECURE_WEBHOOK_HTTP=false

# Security (TLS) - Required if SMTP_SECURE=true
# TLS_KEY_PATH=/path/to/private-key.pem
# TLS_CERT_PATH=/path/to/certificate.pem
